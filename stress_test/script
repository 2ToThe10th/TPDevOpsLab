import { check, sleep } from "k6";
import http from "k6/http";

export let options = {
  insecureSkipTLSVerify: true,
  stages: [
    { duration: "1m", target: 50 },
    { duration: "8m", target: 50 },
    { duration: "1m", target: 0 }
  ],

  discardResponseBodies: true,

  ext: {
    loadimpact: {
      distribution: {
        loadZoneLabel1: { loadZone: "amazon:us:ashburn", percent: 100 },
      }
    }
  }
};

export default function() {
  let res = http.get("https://217.73.88.161:8443");

  check(res, {
      "is status 200": (r) => r.status === 200
  });

  sleep(3);
}
